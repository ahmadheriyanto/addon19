<odoo>
  <!-- KEEP template ID exactly as requested -->
  <template id="mobile_warehouse_template" name="Mobile Warehouse Scanner">
    <t t-call="website.layout">
      <div class="container mt-4">
        <div class="row">
          <div class="col-12">
            <h1>Mobile QR Scanner</h1>
            <p class="text-muted">Use your camera (if supported) or choose an image file from your phone to scan a QR code.</p>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6">
            <!-- Camera-based scanner UI -->
            <div id="camera-scanner-holder" class="mb-3">
              <!-- mobile_scanner.js will populate this area with video and controls -->
              <noscript>
                <div class="alert alert-warning">Camera scanning requires JavaScript.</div>
              </noscript>
            </div>

            <!-- File-based QR scan UI (unchanged) -->
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Scan QR from image file</h5>
                <div class="mb-2">
                  <input id="qr_file_input" type="file" accept="image/*" class="form-control" />
                </div>
                <div class="mb-2">
                  <button id="scan_file_btn" class="btn btn-primary">Scan from file</button>
                  <button id="clear_file_btn" class="btn btn-secondary ms-2" type="button">Clear</button>
                </div>
                <div id="qr_status" class="mt-3"></div>
                <canvas id="qr_canvas" style="display:none; max-width:100%;"></canvas>
              </div>
            </div>

          </div>

          <div class="col-md-6">
            <div class="card">
              <div class="card-body">
                <h5 class="card-title">Decoded result</h5>
                <div id="qr_result_area" class="small text-wrap">
                  <em>No scan yet</em>
                </div>
                <div id="qr_actions" class="mt-3"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- load jsQR (for fallback) -->
      <script src="https://cdn.jsdelivr.net/npm/jsqr@1.4.0/dist/jsQR.js"></script>

      <!-- load the camera scanner and file-scanner static assets -->
      <script type="text/javascript" src="/stockmobilescanner/static/src/js/mobile_scanner.js"></script>
      <script type="text/javascript" src="/stockmobilescanner/static/src/js/scan_from_file.js"></script>
    </t>
  </template>
</odoo>